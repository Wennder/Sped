<?php

namespace Sped\Schemas\V200;

require_once dirname(__FILE__) . '/../../../../../library/Sped/Schemas/V200/DocumentNFe.php';

/**
 * Test class for DocumentNFe.
 * Generated by PHPUnit on 2012-06-28 at 04:32:17.
 */
class DocumentNFeTest extends \PHPUnit_Framework_TestCase
{

    /**
     * @var DocumentNFe
     */
    protected $object;

    /**
     * Sets up the fixture, for example, opens a network connection.
     * This method is called before a test is executed.
     */
    protected function setUp()
    {
        $this->object = new DocumentNFe();
    }

    /**
     * Tears down the fixture, for example, closes a network connection.
     * This method is called after a test is executed.
     */
    protected function tearDown()
    {
        
    }

    /**
     * @todo Implement testGetNFe().
     */
    public function testGetNFe()
    {
        $xml = './samples/35101158716523000119550010000000011003000000-nfe.xml';
        $loaded = $this->object->load($xml);
        var_dump($this->object->getNFe()->getInfNFe()->getVersao());
        var_dump($this->object->getNFe()->getInfNFe()->getId());
        var_dump($this->object->getNFe()->getInfNFe()->getIde()->getDEmi()->nodeValue);
        var_dump($this->object->getNFe()->getInfNFe()->getEmit()->getEnderEmit()->getUF()->nodeValue);
        var_dump($this->object->getNFe()->getInfNFe()->getDet()->getNItem());
        $this->assertTrue($loaded);
    }

    /**
     * @todo Implement testAddNFe().
     */
    public function testAddNFe()
    {
        try {
            $this->object->addNFe();
            $this->object->getNFe()->addInfNFe();
            $this->object->getNFe()->getInfNFe()->addIde();
            $this->object->getNFe()->getInfNFe()->getIde()->addCDV('123');
            $this->object->getNFe()->getInfNFe()->getIde()->addCMunFG('123');
            $this->object->getNFe()->getInfNFe()->getIde()->addCNF('123');
            $this->object->getNFe()->getInfNFe()->getIde()->addNFref();
            $this->object->getNFe()->getInfNFe()->getIde()->getNFref(0)->addRefNF()->addAAMM(1210);
            $this->object->getNFe()->addSignature();
            $this->object->getNFe()->getSignature()->addSignedInfo();
            $this->object->formatOutput = true;
            var_dump($this->object->saveXML());
        } catch (\DOMException $exc) {
            echo $exc->getTraceAsString();
        }
    }

    /**
     * @todo Implement testSetNFe().
     */
    public function testSetNFe()
    {
        $this->object->setNFe(new \Sped\Schemas\V200\TNFe(DocumentNFe::NFE));
        var_dump($this->object->saveXML());
        $this->assertTrue(true);
    }

}

?>
